%% LyX 2.1.3 created this file.  For more info, see http://www.lyx.org/.
%% Do not edit unless you really know what you are doing.
\documentclass{article} 
\usepackage{ucs}
\usepackage[utf8x]{inputenc}
\usepackage[sc]{mathpazo}
\usepackage[T1]{fontenc}
\usepackage{geometry}

\newenvironment{uzdevums}[1][\unskip]{%
\vspace{3mm}
\noindent
\textbf{#1 uzdevums:}
\noindent}
{}

\geometry{verbose,tmargin=2.5cm,bmargin=2.5cm,lmargin=2.5cm,rmargin=2.5cm}
\setcounter{secnumdepth}{2}
\setcounter{tocdepth}{2}
\usepackage{url}
\usepackage[unicode=true,pdfusetitle,
 bookmarks=true,bookmarksnumbered=true,bookmarksopen=true,bookmarksopenlevel=2,
 breaklinks=false,pdfborder={0 0 1},backref=false,colorlinks=false]
 {hyperref}
\renewcommand{\abstractname}{Anotācija}
\hypersetup{
 pdfstartview={XYZ null null 1}}
\begin{document}
<<setup, include=FALSE, cache=FALSE>>=
library(knitr)
# set global chunk options
opts_chunk$set(fig.path='figure/minimal-', fig.align='center', fig.show='hold')
options(formatR.arrow=TRUE,width=90)
@


\title{41.\ AMO rezultāti tabulās un zīmējumos}

\author{}
\date{}

\maketitle

\begin{abstract}
Šajā dokumentā apkopoti daži 41.\ Atklātās matemātikas olimpiādes (2014.m.g.) rezultātu kop\-sa\-vil\-ku\-mi. Izmantojot izklājlapas, ko publisko LU Neklātienes Matemātikas Skola, aprēķināts dalībnieku skaits, dalības aktivitāte (AMO dalībnieku īpatsvars no visiem attiecīgā vecuma skolēniem), dalība un rezultāti atkarībā no skolēnu \v{g}eogrāfijas, urbanizācijas, valodas, dzimuma. Apkopoti saraksti ar skolotājiem un skolām, kas nodrošinājuši augstu dalību vai ieguvuši lielu punktu kopskaitu. Pārskata nobeigumā minēti dati arī par uzdevumiem --- vidējais punktu skaits un vērtējumu sadalījums, kāda daļa no rēķinātājiem neuzsāka risināt (``mīnusu'' jeb neatrasto risinājumu skaits galavērtējumā), kāda ir konkrētā uzdevuma vērtējumu korelācija ar pārējo uzdevumu vērtējumu summu. 
\end{abstract}

\section{Dalībnieku aktivitāte}

Šajā sadaļā atbildēsim uz jautājumu, kāda daļa no 6.klasei atbilstošās vecuma grupas skolēniem piedalījās 42.\ AMO. 
Dati par skolēnu skaitu pa re\v{g}ioniem, klasēm un mācību valodām ņemti no IZM publiskotās statistikas --- \url{http://izm.gov.lv/lv/publikacijas-un-statistika/statistika-par-visparejo-izglitibu/2014-2015-m-g}. Dati apkopoti par 9 lielajām pilsētām kā arī par re\v{g}ioniem, kuros nav ietvertas lielās pilsētas. Ar {\em re\v{g}ioniem} domāti NUTS 3 re\v{g}ioni --- sk. \url{http://en.wikipedia.org/wiki/Statistical_regions_of_Latvia} - Kurzeme, Latgale, Pierīga Rīga, Vidzeme, Zemgale.


\subsection{Dalība olimpiādē}

<<external-code, cache=FALSE, echo=FALSE>>=
setwd("/home/st/ddgatve-stat/reports/")
read_chunk('amo41-report-helper.R')
results <- getExtResults()
num.participants <- nrow(results)
@

%% col1 = region
%% col2 = participants
%% col3 = total guys
%% col4 = percentage participated

<<kable, echo=FALSE>>=
activityRegion <- c("Liepaja","Ventspils","Cita Kurzeme",
                    "Daugavpils","Rezekne","Cita Latgale",
                    "Jurmala","Cita Pieriga",
                    "Riga",
                    "Valmiera","Cita Vidzeme",
                    "Jekabpils","Jelgava","Cita Zemgale")
ttParticipants <- table(results$Region14)
activityParticipants <- as.vector(sapply(activityRegion,
                                         function(rr) {
                                           ttParticipants[[rr]]
                                         }))
activityParticipants <- c(activityParticipants, sum(activityParticipants))
allPupils <- getAllPupils(2013)
activityAllPupils <- 
  as.vector(sapply(activityRegion,
                   function(rr) {
                     sum(allPupils[allPupils$Region14==rr,10:17])
                     }))
activityAllPupils <- c(activityAllPupils, sum(activityAllPupils))
activityRegion <- c(activityRegion, "*** Visa Latvija")
activityTable <- 
  matrix(c(activityParticipants,
           activityAllPupils,
           100*activityParticipants/activityAllPupils), 
         nrow=length(activityParticipants),
         dimnames = list(activityRegion,c("Participants","All (Grades 5-12)","Activity")))
kable(activityTable, digits=2)
@



<<regional-activity, echo=FALSE, fig.width=6, fig.height=5>>=
aa <- rev((100*activityParticipants/activityAllPupils)[1:14])
bb <- rev(activityRegion[1:14])
old.par <- par(mar = c(5, 6, 4, 2)+0.1)
barplot(aa, names.arg=bb, horiz=TRUE, las=1, 
        main="Number of Participants per Region (%)")
grid(col="black", ny=NA)
abline(v=2.23,lwd=2,lty="dashed",col="red")
par(old.par)
@


% 1+9+5 aktivitāšu skaitļi pa reģioniem
% Katram no 15 reģioniem dota dzimumu proporcija
%% Stabiņi grupās pa 3 - visi/meitenes/zēni. 

% 1+9+5 aktivitāšu skaitļi pa reģioniem - darbi latviešu valodā
% Katram no 15 reģioniem dota dzimumu proporcija

% 1+9+5 aktivitāšu skaitļi pa reģioniem - darbi krievu valodā
% Katram no 15 reģioniem dota dzimumu proporcija

\subsection{Dalība un sociāli-ekonomiskie rādītāji}

% Trīs 14-bumbulīšu diagrammas

Šeit varētu ievietot diagrammas pa novadiem vai novadu grupām, kas parāda divu parametru attiecību (varētu būt runa par burbulīšu diagrammām, ko zīmē divās dimensijās; turklāt burbulīša laukums ir aptuveni proporcionāls skolēnu skaitam olimpiādē).

\begin{itemize}
\item Sociāli-ekonomisko rādītāju --- bezdarbu, IIN uz 1 iedzīvotāju, pašvaldības izdevumus uz 1 skolēnu vai skolēnu skaitu skolā.
\item Dalībnieku aktivitāti (dalībnieku attiecību pret visiem skolēniem novadā) kā arī olimpiādes summāro rezultātu (punktu summas attiecību pret visiem skolēniem novadā). 
\end{itemize}

Šādas diagrammas palīdzētu saprast, kādi sociālie priekšnoteikumi veicina interesi par olimpiādēm, kāda izglītības politika (piemēram, mazo skolu saglabāšana vai slēgšana; lielāki vai mazāki izdevumi par vienu skolēnu) varētu pozitīvi iespaidot olimpiāžu rezultātus. 

\subsection{Dalībnieku struktūra}



%% Segmenti -- 6 NUTS reģioni
% http://en.wikipedia.org/wiki/Statistical_regions_of_Latvia

Atklātajā matemātikas olimpiādē sastopami darbi latviešu un krievu valodās. Valodu būtu visprecīzāk noteikt, aplūkojot katru konkrēto darbu. Par 41.\ AMO mums šādas informācijas nav, tādēļ valodu secinājām no skolēna re\v{g}istrācijā minētās informācijas, vai arī viņa skolā dominējošo valodu, bet jauktām skolām --- valodu, kas visbiežāk sastopama pieteiktā matemātikas skolotāja audzēkņu vidū. Katras klases joslas iekšpusē iezīmēts balts aplītis, kurš parāda latviešu skolēnu īpatsvaru visu attiecīgās klases audzēkņu vidū. 

Kā redzams, dalība AMO nav pilnīgi proporcionāla latviešu un krievu skolu audzēkņu vidū. Tomēr atšķirības nav lielas --- pie pašreizējās olimpiādes apmeklētības, šo statistiku varētu jūtami izmainīt, papildus piesaistot dalībai olimpiādē dažus desmitus skolēnu. Latvijas vispārizglītojošajās skolās mācības mēdz notikt arī poļu, ukraiņu, baltkrievu, angļu un franču valodās. Šo skolu audzēkņi var izvēlēties rakstīt darbu latviski vai krieviski. Viņu darbi arī pieskaitīti --- atkarībā no re\v{g}istrācijas brīdī izvēlētās valodas.


%% K/L skaita attiecība pa klasēm 
<<lang-proportions, echo=FALSE, fig.width=6, fig.height=4>>=
lvTotalPupils <- c(14735, 13922, 13256, 13227, 13216, 13022, 13376, 12655, 12367, 7356, 6902, 7689)[5:12]
totalPupils <- c(20730, 19572, 18696, 18864, 18579, 18141, 18543, 17363, 16898, 10126, 9621, 10730)[5:12]
totalRatio <- (lvTotalPupils/totalPupils)


langtab <- table(results$Grade,results$Language)
langmat <- matrix(c(langtab[,"L"]/rowSums(langtab),
langtab[,"K"]/rowSums(langtab)),nrow=2,byrow=TRUE)
barplot(langmat/colSums(langmat), las=1,
col=c("darkgreen","red"),
horiz=TRUE, names.arg=sprintf("G%d",5:12),
main="Proportions of Olympiad Papers in Latvian and Russian")
points(x=totalRatio,y=1.2*(1:8)-0.5,pch=19, col="white")
@



%% Marimekko diagrammas - dalībnieku dzimumu struktūra pa reģioniem. 
% https://learnr.wordpress.com/2009/03/29/ggplot2_marimekko_mosaic_chart/
%% Segmenti -- 4 urbanizācijas tipi (LV-meitenes, LV-zēni, RU-meitenes, RU-zēni)

Dalībnieku demogrāfisko struktūru var attēlot arī dažādām parametru kombinācijām. Šajā zīmējumā redzams dalībnieku sadalījums pa klasēm (vertikālie stabiņi), un katras klases iekšienē --- arī pa darbu valodām un dalībnieku dzimumiem. Skolēna dzimums re\v{g}istrācijas un rezultātu datos nav dots, 41.\ AMO tos noteicām pēc skolēna vārda. Pasaulē ir zināmas matemātikas sacensības, piemēram, EGMO (European Girls' Mathematical Olympiad), kuru nolūks ir veicināt meiteņu pievēršanos eksaktajām un inženierzinātnēm. Kopš 2013.\ gada EGMO piedalās arī četras vecāko klašu skolnieces no Latvijas.

Latviešu valodā rakstītajiem darbiem zēnu un meiteņu ir aptuveni vienāds skaits, bet krievu valodā rakstītajiem darbiem meiteņu vecāko klašu grupās ir pat divreiz mazāk nekā zēnu.


<<demography-segments, echo=FALSE, fig.width=7, fig.height=6>>=
library(reshape)
library(ggplot2)

results <- getExtResults()
pupilsPerGrade <- as.vector(table(results$Grade))
pupilsPerGradePercent <- 100*pupilsPerGrade/sum(pupilsPerGrade)

AlphaVals <- 100*as.vector(table(results$Grade[
  results$Dzimums=="Male" & results$Language=="L"]))/pupilsPerGrade
BetaVals <- 100*as.vector(table(results$Grade[
  results$Dzimums=="Female" & results$Language=="L"]))/pupilsPerGrade
GammaVals <- 100*as.vector(table(results$Grade[
  results$Dzimums=="Male" & results$Language=="K"]))/pupilsPerGrade
DeltaVals <- 100*as.vector(table(results$Grade[
  results$Dzimums=="Female" & results$Language=="K"]))/pupilsPerGrade


df <- data.frame(
  segment = 5:12, 
  segpct = pupilsPerGradePercent, 
  lv.males = AlphaVals, 
  lv.females = BetaVals,
  ru.males = GammaVals, 
  ru.females = DeltaVals)

df$xmax <- cumsum(df$segpct)
df$xmin <- df$xmax - df$segpct
df$segpct <- NULL

dfm <- melt(df, id = c("segment", "xmin", "xmax"))

dfm1 <- ddply(dfm, .(segment), transform, ymax = cumsum(value))
dfm1 <- ddply(dfm1, .(segment), transform,
              ymin = ymax - value)


dfm1$xtext <- with(dfm1, xmin + (xmax - xmin)/2)
dfm1$ytext <- with(dfm1, ymin + (ymax - ymin)/2)

p <- ggplot(dfm1, aes(ymin = ymin, ymax = ymax,
                      xmin = xmin, xmax = xmax, fill = variable))

p1 <- p + geom_rect(colour = I("grey"))

p2 <- p1 + geom_text(
  aes(x = xtext, y = ytext,
      label = ifelse(segment == "A", 
                     paste(variable," - ", value, "%", sep = ""), 
                     sprintf("%2.1f%%", value))), 
  size = 3.5)



p3 <- p2 + geom_text(aes(x = xtext, y = 103,
                         label = sprintf("G%d", segment)), size = 4)


p3 + theme_bw() + 
  labs(x = NULL, y = NULL,fill = NULL) +  
  scale_fill_brewer(palette = "Set2") + 
  theme(legend.position = "bottom",
       panel.grid.major = element_line(colour = NA),
       panel.grid.minor = element_line(colour = NA))

@





\section{Vidējie rezultāti dalībnieku kategorijām}

Zīmējumā dots rezultātu intervāls katrai klasei. ``Kastītes'' kreisā mala atbilst apakšējai kvartilei, labā mala --- augšējai kvartilei, bet platā zilā svītriņa vidū --- mediānai. Ja klases darbus sakārtotu punktu pieaugšanas secībā un sadalītu četrās vienādās daļās, tad viszemāko punktu ieguvēju ceturtdaļa atrastos uz kreisās ūsas, divas vidējās ceturtdaļas --- kastītes iekšpusē, bet augšējā ceturtdaļa --- uz labās ūsas. Kā redzams attēlā, 12.\ klases skolnieku iegūtais punktu skaits ir būtiski lielāks nekā citu klašu risinātājiem. To varētu izskaidrot daži viegli uzdevumi, kuri ir 12.\ klases komplektā. 

<<boxplots-per-grade, echo=FALSE, fig.width=7, fig.height=4>>=
boxplot(Summa ~ Grade, data = results, horizontal=TRUE, range=0, main="Total Points: Ranges and Quartiles per Grade",border="blue",lwd=2,las=1,names=sprintf("G%1.0f",5:12))
abline(v=5*(0:10),col="lightgray",lty="dotted")
@




%% Visu dalībnieku darbi, iekrāsotas godalgotās vietas 
%% Meiteņu un zēnu darbi (Meitenes zīmējam tanī pašā histogrammā)
%% Meitenes ir sazīmētas apakšā. 

%% Urbaniz. tips. Rīgas, 8 lielo pilsētu, mazpilsētu un lauku darbi

%% Latviešu un krievu valodā rakstītie darbi

%% Latviešu un krievu valodā rakstītie darbi -- tikai 9 lielajās pilsētās


\section{Skolas un skolotāji}

% Skolas pēc dalībnieku skaita

% Skolas pēc savāktajiem punktiem

%% Skolotāji pēc dalībnieku skaita

%% Skolotāji pēc savākto punktu skaita

%% Paretto princips pa novadiem; pa skolotājiem utml. Atrast, cik % no skolotājiem nodrošina 80% dalības
%% vai 80% no laureātiem, vai 80% no punktiem. 


\section{Rakstīšanas ilgums un rezultāti}

Daudzās risināšanas telpās dežuranti atzīmēja darba nodošanas laiku. Šeit vizualizējam izplatītākos darbu rakstīšanas ilgumus (nodošanas laiks mīnus 10:30) un dalībnieka rezultāta atkarību no rakstīšanas ilguma.


% Rakstīšanas ilgumu histogramma (15 min. intervāli)


% Vidējais rezultāts atkarībā no rakstīšanas ilguma


% Cik ilgi olimpiādes darbu rakstījuši bērni atkarībā no rezultāta
% 1-3 vietu ieguvēji, atzinību ieguvēji, utt. 


% Cik ilgi olimpiādes darbu rakstījuši bērni atkarībā no dzīvesvietas
% Dalām 14 kategorijās. 


\section{Dati par atsevišķajiem uzdevumiem}

\subsection{Vidējais vērtējums}

Ikviena uzdevuma vērtējums ir skaitlis no 0 līdz 10. Šajā tabulā apkopoti visu uzdevumu vidējie vērtējumi katrā no klašu grupām. 

% Vidējais rezultāts pa uzdevumiem
<<kable2, echo=FALSE>>=
meanGrades <- numeric(0)
corrGrades <- numeric(0)
probNames <- c("Uzd1","Uzd2","Uzd3","Uzd4","Uzd5")
for (gg in 5:12) {
  vectList <- list()
  for (ii in 1:length(probNames)) {
    options(warn=-1)
    theVect <- as.numeric(
      results[results$Grade==gg,probNames[ii]])
    options(warn=0)
    theVect[is.na(theVect)] <- 0
    vectList[[probNames[ii]]] <- theVect
    meanGrades <- c(meanGrades,mean(theVect))
  }
  for (jj in 1:length(probNames)){
    vectA <- vectList[[probNames[jj]]]
    vectB <- rep(0,length(vectA))
    for (kk in probNames[-jj]) {
      vectB <- vectB + vectList[[kk]]
    }
    corrGrades <- c(corrGrades,cor(vectA,vectB))
  }  
}

meanTable <- 
  matrix(sprintf("%1.2f", meanGrades), 
         nrow=length(5:12),byrow=TRUE,
         dimnames = list(
           sprintf("G%1.0f",5:12),probNames))
kable(meanTable)
@

Viszemākais un visaugstākais vidējais vērtējums ir attiecīgi 11.\ klases 4.\ uzdevumam (1.75) un 12.\ klases 1.\ uzdevumam (7.09).

\begin{uzdevums}[11.4]
Doti 99 naturāli skaitļi. Zināms, ka nav tāda skaitļa, ar ko dalītos visi šie skaitļi, un ka jebkuru 50 skaitļu reizinājums dalās ar atlikušo 49 skaitļu reizinājumu. Pierādīt, ka visu 99 skaitļu reizinājums ir naturāla skaitļa kvadrāts. 
\end{uzdevums}


\begin{uzdevums}[12.1]
Atrisināt nevienādību $9^x - 2 \cdot 3^x - 3 \leq 0$.
\end{uzdevums}



% Uzdevumā saņemto punktu daļa dažādu kategoriju dalībnieku rezultātos

% Uzdevuma vērtējuma korelācija ar pārējo uzdevumu summu
\subsection{Uzdevuma vērtējuma korelācija ar pārējo vērtējumu summu}

Ja uzskatām, ka olimpiāde kopumā mēra noteikta veida matemātiskas prasmes, tad par katru uzdevumu var uzdot jautājumu: Cik labi šis uzdevums palīdz mērīt to pašu, ko olimpiādes uzdevumu komplekts kopumā? Ja konkrētais uzdevums labi ``iederas'' starp citiem, tad korelācija būs augsta, ja tas mēra kādas stipri atšķirīgas prasmes nekā citi tās pašas klases uzdevumi, tad korelācija būs mazāka.

Teorētiski varētu gadīties arī negatīva korelācija --- t.i. tāds uzdevums, kuru labākie olimpiādes dalībnieki risināja sliktāk nekā citi. Tad paša uzdevuma vai vērtēšanas sistēmas korektums radītu nopietnas šaubas. Olimpiāžu praksē tomēr negatīvas korelācijas nav vērojamas. Salīdzinoši zemas uzdevuma vērtējuma korelācijas ar citiem uzdevumiem ļauj atrast tos uzdevumus, kuru tēma vai vērtēšanas kritēriji ir būtiski atšķīrušies no citiem uzdevumiem no tā paša 5 uzdevumu komplekta.

<<kable3, echo=FALSE>>=
corrTable <- 
  matrix(sprintf("%1.2f", corrGrades), 
         nrow=length(5:12),byrow=TRUE,
         dimnames = list(
           sprintf("G%1.0f",5:12),probNames))
kable(corrTable)
@

Mazākās korelācijas ar citiem tās pašas klases uzdevumiem ir 10.\ klases 2.\ uzdevumam (0.13) un 12.\ klases 4.\ uzdevumam (0.05). 

\begin{uzdevums}[10.2]
Dotas divas paralēlas taisnes. Uz vienas no tām atzīmēti 14 zaļi punkti, uz otras -- 14 sarkani punkti. Kādu lielāko skaitu nogriežņu, kuriem viens galapunkts ir zaļš, bet otrs -- sarkans, var novilkt tā, lai tie nekrustotos? Saka, ka nogriežņi krustojas, ja tiem ir kopīgs iekšējais punkts, t.i., ja tiem ir kopīgs tikai galapunkts, tie nekrustojas.
\end{uzdevums}


\begin{uzdevums}[12.4]
Vai kvadrātu ar malas garumu 10 var noklāt ar 25 ``krustiņiem'' (skat. zīm.), kuri sastāv no 5 kvadrātiem ar malas garumu 1? ``Krustiņi'' drīkst pārklāties, kā arī iziet ārpus dotā kvadrāta malām.\\
\includegraphics[width=20mm]{pentomino-x.png}
\end{uzdevums}



\end{document}
